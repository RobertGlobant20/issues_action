name: Move Issue
on: 
  issues:
    types: [opened, labeled]
env:
  MOVED: false
jobs: 
  gitIssueTransfer:
    strategy:
      matrix: 
        include: 
          - label: 'question'
            repoOwner: 'Astul-Betizagasti'
            repoName: 'IssueTest'
          - label: 'help wanted'
            repoOwner: 'RobertGlobant20'
            repoName: 'issues_action2'
    name: Move issues to corresponding repository
    runs-on: ubuntu-latest
    steps:
      - name: (Label ${{ matrix.label }}) Move to ${{ matrix.repoName }}
        if: contains(github.event.issue.labels.*.name, matrix.label)
        uses: maxkomarychev/oction-create-issue@v0.7.1
        id: my_step_id
        with:
          token: ${{ secrets.GIT_HUB_TOKEN3 }}
          owner: ${{ matrix.repoOwner }}
          repo: ${{ matrix.repoName }}
          title: ${{ github.event.issue.title }}
          body: ${{ github.event.issue.body }}
      - name: Issue moved
        if: contains(github.event.issue.labels.*.name, matrix.label)
        run: echo "MOVED=true" >> $GITHUB_ENV
  closeIssue:
    needs: gitIssueTransfer
    name: Close moved issues
    runs-on: ubuntu-latest
    steps:
      - name: Close issue
        if: MOVED
        uses: peter-evans/close-issue@v1      

